@startuml
actor Guerrero
participant Juego
participant Mapa
participant Ubicacion
participant Pelea
participant Dragon
activate Guerrero

Guerrero -> Juego: visitarUbicacion(ubicacion): void
activate Juego
Juego -> Mapa: obtenerUbicacion()
activate Mapa
Mapa --> Juego: Ubicacion
deactivate Mapa

Juego -> Ubicacion: visitarUbicacion(Guerrero)
activate Ubicacion
Ubicacion -> Ubicacion: tieneCriatura():boolean
Ubicacion --> Juego: Criatura

alt Ubicación tiene una criatura
   Juego->Juego: iniciarPelea(Ubicacion)
    activate Pelea
    Juego -> Pelea: Pelea(Guerrero, Dragon)
    
    loop Hasta que Guerrero o Dragon esté derrotado
        Guerrero -> Pelea: atacar(Dragon)
        Pelea -> Dragon: recibirGolpe(danio)
        
        alt Dragon sigue vivo
            Dragon -> Pelea: atacar(Guerrero)
            Pelea -> Guerrero: recibirGolpe(danio)
        end
    end
    
    alt Guerrero gana
        Pelea --> Juego: ganoPersonaje()
        Juego -> Ubicacion: mostrarTesoroSiGanaste()
    else Dragon gana
        Juego -> Guerrero: finDelJuego()
    end
	deactivate Juego

    deactivate Pelea
else Ubicación neutral
    Ubicacion --> Guerrero: descansar()
end
deactivate Ubicacion


deactivate Guerrero

@enduml





