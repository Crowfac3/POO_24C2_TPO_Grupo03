@startuml
actor Guerrero
participant "Mapa"
participant "Ubicacion"
participant "Pelea"
participant "Dragón"


activate Guerrero
Guerrero -> Mapa: getUbicacion(ubicacion)
activate Mapa
Mapa -> Mapa: getAdyacente(): List<ubicacion>
Mapa -> Guerrero: listUbicacionesAdyacentes(ubicacion)
deactivate Mapa
Guerrero -> Ubicacion: viajar(ubicacion)
activate Ubicacion
Ubicacion -> Ubicacion: tieneCriatura()
alt tieneCriatura
    Ubicacion -> Pelea: iniciarPelea(criatura)
	activate Pelea
    loop mientras no se verifica la victoria
        alt turno del Guerrero
            Guerrero -> Pelea: atacar()
            Pelea -> Dragón: calcularDanio()
            Dragón -> Dragón: defender(danioRecibido)
            Pelea -> Dragón: verificarVida()
            alt sin vida del Dragón
                Pelea -> Guerrero: informarVictoria()
                
            else con vida
                Pelea -> Pelea: siguienteTurno()
            
			end
		end
        alt turno del Dragón
            Dragón -> Pelea: atacar()
            Pelea -> Guerrero: calcularDanio()
            Guerrero -> Guerrero: defender(danioRecibido)
            Pelea -> Guerrero: verificarVida()
            alt sin vida del Guerrero
                Pelea -> Dragón: informarVictoria()
                
            else con vida
                Pelea -> Pelea: siguienteTurno()
            
			end
		end
	end
	deactivate Pelea
end
deactivate Ubicacion
deactivate Guerrero
@enduml
