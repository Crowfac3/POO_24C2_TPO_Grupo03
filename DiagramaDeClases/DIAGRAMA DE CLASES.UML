@startuml

class Juego {
	-estado: String
	// "en progreso", "victoria" o "derrota"
	-Jugador: Jugador
	-Mapa: Mapa
	+iniciarJuego(nombre: String, TipoDeClase: TipoDeClase)
	+realizarAccion(accion: String)
	+verificarVictoria(): Boolean
	+verificarDerrota(): Boolean
}

class Jugador {
	+Nombre
	+crearPersonaje("Todos los atributos de Personaje")
}


abstract class Personaje extends Jugador {
	+Nombre: String
	+EXP: int
	+HP: int
	+HPMaximo: int
	+Ataque: int
	+Defensa: int
	+mejorarPersonaje(expGastado: int)
	+reclamarRecompensa(mision: Mision)
}

Interface TipoDeClase {
	+HabilidadPasiva()
	+getHabilidades()
} 

class Mago implements TipoDeClase {
	+HabilidadPasiva()
	+Habilidad = ["Al finalizar Pelea, HP = 100%", "Inmune contra espectros"]: Habilidades
}
class Guerrero implements TipoDeClase {
	+HabilidadPasiva()
	+Habilidad = ["Derriba Troll de un solo golpe", "Despues de tercer GolpeDeAtaque, Ataque * 2"]: Habilidades
}
class Arquero implements TipoDeClase {
	+Punteria: int
	+Agilidad: int
	+HabilidadPasiva()
	+Habilidad = ["Esquiva golpe = Agilidad%", "Punteria = 100% contra Dragon"]: Habilidades
}

abstract class Criatura {
	+EXPRecompensa
	+Nombre: String
	+HP: int
	+Ataque: int
	+Defensa: int
	+Habilidades: Habilidades[]
	+getHabilidad(): String
}

class Dragon extends Criatura{
	+Habilidad = "Lucha contra Guerrero, Ataque + 30%"
}
class Troll extends Criatura{
	+Habilidad = "Lucha contra Mago, Defensa + 15%"
}
class Espectro extends Criatura{
	+Habilidad = "Lucha contra Arquero, Ataque + 20%"
}

class Pelea {
	+Turnos: int //Par -> Personaje 
	+iniciarPelea(criatura: Criatura)
	+calcularDanio(): int
	+siguienteTurno() //funcion recursiva
	+restarVida(): void
	+verificarVida(): void
}

class Mapa{
	-Ubicaciones: Ubicacion[10][10]
	+mostrarMapa()
	+viajar(ubicacion: Ubicacion)
}

class Ubicacion{
	-tieneCriatura: Boolean
	-tieneTesoro: Boolean
	-explorado: Boolean
	+revelarTesoro()
}

class UbicacionNeutral extends Ubicacion{
	+descansar(): void
	+mejorarPersonaje(EXP: int)
	+reclamarRecompensa(): void
}

abstract class Mision {
	-nombre: String
	-completada: Boolean
	+setRecompensa(): void
}

class MisionDragonDelNorte extends Mision {
	+nombre = "Derrota al Drag√≥n del Norte"
	+setRecompensa(): void
}

class MisionAmuletoPerdido extends Mision {
	+nombre = "Recupera el Amuleto Perdido"
	+setRecompensa(): void
}

class MisionEspectrosDelPantano extends Mision {
	+nombre = "Elimina a los Espectros del Pantano"
	+setRecompensa(): void
}

class MisionTrollsAldea extends Mision {
	+nombre = "Limpia la Aldea de los Trolls"
	+setRecompensa(): void //tiene que chequear que sea Guerrero
}


class Tesoro {
	-nombre: string
}

Personaje *-- TipoDeClase : integra

Personaje "1" o-- "1" Mapa : Explora 
Mapa "1" *-- "100" Ubicacion : contiene 
Ubicacion "1" *-- "1" Tesoro : tiene
Ubicacion "1" *-- "0..*" Mision : provee

Personaje "1" *-- "0..*" Pelea : participa
Criatura "1" *-- "0..*" Pelea : participa

Juego "1" o-- "1" Jugador 

@enduml